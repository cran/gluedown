<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Markdown Literal Programming</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Markdown Literal Programming</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(gluedown)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(glue)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(dplyr)</a></code></pre></div>
<p>In literate programming, the typical paradigm of source code is reversed; instead of walls of code with the occasional comment, the user writes human readable text (like this paragraph) with source code interspersed. In the R language, this is primarily done with the [<code>rmarkdown</code>][rmd] package, which takes a plaint text special <code>.Rmd</code> file containing code “chunks” and executes that code when converting to some other format (<code>.md</code>, <code>.html</code>, <code>.pdf</code>, etc).</p>
<p>Markdown is a lightweight plain-text language used to format text. Let’s look at the original description of markdown from John Gruber’s website, the creator of the markdown standard. Using the <code>rvest</code> package, we can programmatically scrape Gruber’s blog, extract HTML paragraph tags, and convert those tags to character vectors.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">markdown_blog &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">read_html</span>(<span class="st">&quot;https://daringfireball.net/projects/markdown/&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="st">  </span><span class="kw">html_text</span>()</a></code></pre></div>
<p>Gruber first explains <em>what</em> exactly his markdown language is.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">md_quote</span>(markdown_blog[<span class="dv">4</span>])</a></code></pre></div>
<blockquote>
<p>Markdown is a text-to-HTML conversion tool for web writers. Markdown allows you to write using an easy-to-read, easy-to-write plain text format, then convert it to structurally valid XHTML (or HTML).</p>
</blockquote>
<p>He continues by outlining <em>why</em> markdown was created, his rationale for it’s format, and some inspiration for it’s syntax.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">md_quote</span>(markdown_blog[<span class="dv">6</span>])</a></code></pre></div>
<blockquote>
<p>The overriding design goal for Markdown’s formatting syntax is to make it as readable as possible. The idea is that a Markdown-formatted document should be publishable as-is, as plain text, without looking like it’s been marked up with tags or formatting instructions. While Markdown’s syntax has been influenced by several existing text-to-HTML filters, the single biggest source of inspiration for Markdown’s syntax is the format of plain text email.</p>
</blockquote>
<p>This entire vignette was written in markdown and converted to HTML using <a href="https://pandoc.org/">pandoc</a>. However, as you may have noticed, I haven’t exactly been conforming to this original desire for markdown to be readable as is. I didn’t copy the text from his blog and past it as text into this vignette. This is where the <code>gluedown</code> package comes in.</p>
<p>The <code>gluedown</code> package helps ease the transition between the incredibly powerful vector support in R and the readability of markdown. Since this vignette was written in <em>R</em> Markdown, I am able to use the power of packages like <code>rvest</code> to collect, process, or analyze some kind of data and then transition that result to the human readable markdown format. The <code>.Rmd</code> file containing source code is a programming environment, the <code>.md</code> file created by <code>rmarkdown</code> is a human-readable plain text version of that code <em>and</em> findings, and the <code>.html</code> format of this vignette created by <code>pandoc</code> is the final presentation format.</p>
<p>In the rest of this vignette, I will demonstrate some of the various use cases for <code>gluedown</code>. We will see how easy it is to transition between R vectors and readable results in markdown/HTML.</p>
<div id="vector-lists" class="section level2">
<h2>Vector Lists</h2>
<p>Printing vectors as markdown lists was the initial inspiration for the package. In R, atomic vectors the fundamental object type that composes more complex objects like lists and dataframes. The <code>state.name</code> vector built into base R is a character vector of all 50 state names.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">mode</span>(state.name)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; [1] &quot;character&quot;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">length</span>(state.name)</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt; [1] 50</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw">sample</span>(state.name, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; [1] &quot;New Mexico&quot; &quot;Wisconsin&quot;  &quot;Hawaii&quot;</span></a></code></pre></div>
<p>If we as a user want to use those state names as <em>text</em> in our markdown document we can use the <code>cat()</code> function and tell <code>rmarkdown</code> to print the results of that function “as is” (rather than as code output).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">cat</span>(state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a></code></pre></div>
<p>Alabama Alaska Arizona</p>
<p>That output obviously isn’t very appealing. We could tweak our use of <code>cat()</code> a little to separate them on new lines.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">cat</span>(state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n\n</span><span class="st">&quot;</span>)</a></code></pre></div>
<p>Alabama</p>
<p>Alaska</p>
<p>Arizona</p>
<p>This is more readable, but really just prints as a couple lines of the document. With some more work, we can use <code>cat()</code> to print an ordered list.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">cat</span>(<span class="kw">paste0</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&quot;. &quot;</span>, state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]), <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>Alabama</li>
<li>Alaska</li>
<li>Arizona</li>
</ol>
<p>This workflow gets tiresome, although it’s made slightly more simple with the fantastic <a href="https://github.com/tidyverse/glue"><code>glue</code></a> package from Jim Hester.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">glue</span>(<span class="st">&quot;{1:3}. {state.name[1:3]}&quot;</span>)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>Alabama</li>
<li>Alaska</li>
<li>Arizona</li>
</ol>
<p>This is the technique used in this package. Vector inputs are passed to <code>glue::glue()</code> and the appropriate markdown syntax is implemented.</p>
<p>The <code>md_order()</code> function simplifies the <code>glue::glue()</code> workflow and allows users to more easily customize the appearance of the list in <em>markdown</em> format.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># markdown only cares about the first number</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">md_order</span>(state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">seq =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt; 1. Alabama</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt; 1. Alaska</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; 1. Arizona</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co"># markdown ignored padding and allows for use of parentheses</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="kw">md_order</span>(state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">seq =</span> <span class="ot">TRUE</span>, <span class="dt">pad =</span> <span class="ot">TRUE</span>, <span class="dt">marker =</span> <span class="st">&quot;)&quot;</span>)</a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; 01) Alabama</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; 02) Alaska</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">#&gt; 03) Arizona</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">#&gt; 04) Arkansas</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">#&gt; 05) California</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="co">#&gt; 06) Colorado</span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">#&gt; 07) Connecticut</span></a>
<a class="sourceLine" id="cb10-15" title="15"><span class="co">#&gt; 08) Delaware</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co">#&gt; 09) Florida</span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="co">#&gt; 10) Georgia</span></a></code></pre></div>
<p>Although, as we can see below, all these different options are rendered as the same kind of HTML <code>&lt;ol&gt;</code> fragment.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">md_order</span>(state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">seq =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>Alabama</li>
<li>Alaska</li>
<li>Arizona</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">md_order</span>(state.name[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">seq =</span> <span class="ot">TRUE</span>, <span class="dt">pad =</span> <span class="ot">TRUE</span>, <span class="dt">marker =</span> <span class="st">&quot;)&quot;</span>)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>Alabama</li>
<li>Alaska</li>
<li>Arizona</li>
<li>Arkansas</li>
<li>California</li>
<li>Colorado</li>
<li>Connecticut</li>
<li>Delaware</li>
<li>Florida</li>
<li>Georgia</li>
</ol>
<p>This ordered list is a markdown container <em>block</em>. As described in the GitHub Flavored Markdown specification:</p>
<blockquote>
<p>We can think of a document as a sequence of blocks—structural elements like paragraphs, block quotations, lists, headings, rules, and code blocks. Some blocks (like block quotes and list items) contain other blocks; others (like headings and paragraphs) contain inline content—text, links, emphasized text, images, code spans, and so on.</p>
</blockquote>
<p>We can nest <code>md_*()</code> functions to create inline content within a code block. Let’s use some inline functions to create a new vector names <code>inline</code> with five states, each formatted in another syntax. We’ll take a look at what that vector <em>really</em> looks like with a simple <code>print()</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">inlines &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="kw">md_bold</span>(state.name[<span class="dv">4</span>]),</a>
<a class="sourceLine" id="cb13-3" title="3">  <span class="kw">md_code</span>(state.name[<span class="dv">5</span>]),</a>
<a class="sourceLine" id="cb13-4" title="4">  <span class="kw">md_link</span>(state.name[<span class="dv">6</span>], <span class="st">&quot;https://Colorado.gov&quot;</span>),</a>
<a class="sourceLine" id="cb13-5" title="5">  <span class="kw">md_italic</span>(state.name[<span class="dv">7</span>]),</a>
<a class="sourceLine" id="cb13-6" title="6">  <span class="kw">md_strike</span>(state.name[<span class="dv">8</span>])</a>
<a class="sourceLine" id="cb13-7" title="7">)</a>
<a class="sourceLine" id="cb13-8" title="8"></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="kw">mode</span>(inlines)</a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt; [1] &quot;character&quot;</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="kw">length</span>(inlines)</a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="kw">print</span>(inlines)</a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt; [1] &quot;**Arkansas**&quot;                     &quot;`California`&quot;                    </span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">#&gt; [3] &quot;[Colorado](https://Colorado.gov)&quot; &quot;_Connecticut_&quot;                   </span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">#&gt; [5] &quot;~~Delaware~~&quot;</span></a></code></pre></div>
<p>Using <code>md_bullet()</code> we will print that vector as a bullet point list container block and each list item will be rendered as a separate inline.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">md_bullet</span>(inlines)</a></code></pre></div>
<ul>
<li><strong>Arkansas</strong></li>
<li><code>California</code></li>
<li><a href="https://Colorado.gov">Colorado</a></li>
<li><em>Connecticut</em></li>
<li><del>Delaware</del></li>
</ul>
<p>These functions demonstrate how <code>gluedown</code> can be used to transition between R vectors, simply formatted markdown text, and beautifully formatted HTML text.</p>
<p>Aside from container blocks and inlines, there is a third type of markdown content. The leaf blocks cannot contain inline content. The thematic break is an example of a leaf block.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">md_rule</span>(<span class="dt">char =</span> <span class="st">&quot;*&quot;</span>, <span class="dt">n =</span> <span class="dv">80</span>)</a></code></pre></div>
<hr />
<p>Code blocks are another type of leaf block. The code I’ve been writing so far is contained within <code>rmarkdown</code> <em>chunks</em>, which execute the code within. By default, those code chunks are then displayed as regular code blocks in the intermediary <code>.md</code> file. Sometimes we might want to use code blocks to display other types of text. Perhaps we want to show the content of a function. The <code>md_fence()</code> function creates a <em>new</em> code fence from the lines created by <code>deparse()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">lines &lt;-<span class="st"> </span><span class="kw">deparse</span>(md_bullet)</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">md_fence</span>(lines)</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="cf">function</span> (x, <span class="dt">marker =</span> <span class="kw">c</span>(<span class="st">&quot;*&quot;</span>, <span class="st">&quot;-&quot;</span>, <span class="st">&quot;+&quot;</span>)) </a>
<a class="sourceLine" id="cb16-4" title="4">{</a>
<a class="sourceLine" id="cb16-5" title="5">    marker &lt;-<span class="st"> </span><span class="kw">match.arg</span>(marker)</a>
<a class="sourceLine" id="cb16-6" title="6">    glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&quot;{marker} {x}&quot;</span>)</a>
<a class="sourceLine" id="cb16-7" title="7">}</a></code></pre></div>
<p>Or perhaps we want to display some code from another language that isn’t supposed to be executed</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">command &lt;-<span class="st"> &quot;sudo apt install r-base-dev&quot;</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">md_fence</span>(<span class="kw">paste</span>(<span class="st">&quot;$&quot;</span>, command), <span class="dt">char =</span> <span class="st">&quot;~&quot;</span>, <span class="dt">info =</span> <span class="st">&quot;bash&quot;</span>)</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co">#&gt; ~~~bash</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">#&gt; $ sudo apt install r-base-dev</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">#&gt; ~~~</span></a></code></pre></div>
<p>Or maybe we simply want to display some preformatted text that only works in a monospace font like that which is used in code blocks.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">cat &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="st">&quot; -------------- &quot;</span>, <span class="st">&quot;Gluedown rules!&quot;</span> ,<span class="st">&quot; --------------&quot;</span>,</a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="st">&quot;    </span><span class="ch">\\</span><span class="st">&quot;</span>, <span class="st">&quot;     </span><span class="ch">\\</span><span class="st">&quot;</span>, <span class="st">&quot;      </span><span class="ch">\\</span><span class="st">&quot;</span>, <span class="st">&quot;         /</span><span class="ch">\\</span><span class="st">_/</span><span class="ch">\\</span><span class="st">&quot;</span>,</a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="st">&quot;        ( o.o )&quot;</span>, <span class="st">&quot;         &gt; ^ &lt;&quot;</span></a>
<a class="sourceLine" id="cb18-5" title="5">)</a>
<a class="sourceLine" id="cb18-6" title="6"></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="kw">md_indent</span>(cat)</a></code></pre></div>
<pre><code> -------------- 
Gluedown rules!
 --------------
    \
     \
      \
         /\_/\
        ( o.o )
         &gt; ^ &lt;</code></pre>
</div>
<div id="pipes" class="section level2">
<h2>Pipes</h2>
<p>The package has been designed to fit well in a traditional R workflow so users can seamlessly create content with their code and display that content with <code>gluedown</code>. In that spirit, all functions are designed to fit within the tidyverse ecosystem by working with <a href="https://magrittr.tidyverse.org/reference/pipe.html">pipes</a>. Pipes allow users to pass the results of one function into the beginning of the next. By ending this “pipeline” with <code>md_quote()</code>, chain together five coding steps.</p>
<ol style="list-style-type: decimal">
<li>Read the HTML text of a Wikipedia page</li>
<li>Extract the first <code>&lt;blockquote&gt;</code> tag</li>
<li>Convert that tag to a character vector</li>
<li>Remove Wikipedia’s bracketed note</li>
<li>Print that vector as a markdown block quote</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">read_html</span>(<span class="st">&quot;https://w.wiki/A58&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 1</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw">html_node</span>(<span class="st">&quot;blockquote&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 2</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span><span class="kw">html_text</span>(<span class="dt">trim =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 3</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="st">  </span><span class="kw">str_remove</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">[(.*)</span><span class="ch">\\</span><span class="st">]&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 4</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="st">  </span><span class="kw">md_quote</span>() <span class="co"># 5</span></a></code></pre></div>
<blockquote>
<p>We the People of the United States, in Order to form a more perfect Union, establish Justice, insure domestic Tranquility, provide for the common defence, promote the general Welfare, and secure the Blessings of Liberty to ourselves and our Posterity, do ordain and establish this Constitution for the United States of America.</p>
</blockquote>
</div>
<div id="extensions" class="section level2">
<h2>Extensions</h2>
<p>The package primarily uses <a href="https://github.github.com/gfm/">GitHub Flavored Markdown</a> (GFM), a site-specific version of the <a href="https://spec.commonmark.org/">CommonMark specification</a>, an unambiguous implementation of John Gruber’s <a href="https://daringfireball.net/projects/markdown/">original Markdown</a>. With this flavor, some useful extensions like <a href="https://help.github.com/en/articles/about-task-lists">task lists</a> are supported on GitHub. Elsewhere, like this HTML vignette, a task list will just render as a bullet list.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">legislation &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Houses passes&quot;</span>, <span class="st">&quot;Senate concurs&quot;</span>, <span class="st">&quot;President signs&quot;</span>)</a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">md_task</span>(legislation, <span class="dt">check =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a></code></pre></div>
<ul>
<li>[x] Houses passes</li>
<li>[x] Senate concurs</li>
<li>[ ] President signs</li>
</ul>
<p>Some features aren’t technically supported by GFM, but can be <a href="https://pandoc.org/MANUAL.html#definition-lists">forced by pandoc</a>. For example, the output of <code>md_define()</code> will be rendered as bullet lists on GitHub but appear as formatted definition lists in HTML formats like this.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">terms &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Democracy&quot;</span>, <span class="st">&quot;Monarchy&quot;</span>)</a>
<a class="sourceLine" id="cb22-2" title="2">definitions &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="st">&quot;a system of government by all the eligible members of a state.&quot;</span>,</a>
<a class="sourceLine" id="cb22-4" title="4">  <span class="st">&quot;a form of government with a monarch at the head.&quot;</span></a>
<a class="sourceLine" id="cb22-5" title="5">)</a>
<a class="sourceLine" id="cb22-6" title="6"><span class="kw">md_define</span>(terms, definitions)</a></code></pre></div>
<dl>
<dt>Democracy</dt>
<dd>a system of government by all the eligible members of a state.
</dd>
<dt>Monarchy</dt>
<dd>a form of government with a monarch at the head.
</dd>
</dl>
<p>Markdown tables are another extremely useful extension. The <code>md_table()</code> functions wraps around the much more powerful <code>knitr::kable()</code> function, which allows data frames to be printed in a number of alternative formats. Printing data frames is a very typical use case for documenting the process of data science. With small summary tables like the one below, a markdown table is much more readable than the plain text tibble or data frame printed by default.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">mass &lt;-<span class="st"> </span>starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(species) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">mass =</span> <span class="kw">mean</span>(mass, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>, mass <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mass))</a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">print</span>(mass)</a>
<a class="sourceLine" id="cb24-2" title="2"><span class="co">#&gt; # A tibble: 8 x 3</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="co">#&gt;   species      n  mass</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">#&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="co">#&gt; 1 Wookiee      2 124  </span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">#&gt; 2 Kaminoan     2  88  </span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">#&gt; 3 Human       35  82.8</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">#&gt; 4 Zabrak       2  80  </span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">#&gt; 5 Gungan       3  74  </span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">#&gt; 6 Droid        5  69.8</span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co">#&gt; 7 Twi&#39;lek      2  55  </span></a>
<a class="sourceLine" id="cb24-12" title="12"><span class="co">#&gt; 8 Mirialan     2  53.1</span></a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">md_table</span>(mass)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="right">n</th>
<th align="right">mass</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Wookiee</td>
<td align="right">2</td>
<td align="right">124.00000</td>
</tr>
<tr class="even">
<td align="left">Kaminoan</td>
<td align="right">2</td>
<td align="right">88.00000</td>
</tr>
<tr class="odd">
<td align="left">Human</td>
<td align="right">35</td>
<td align="right">82.78182</td>
</tr>
<tr class="even">
<td align="left">Zabrak</td>
<td align="right">2</td>
<td align="right">80.00000</td>
</tr>
<tr class="odd">
<td align="left">Gungan</td>
<td align="right">3</td>
<td align="right">74.00000</td>
</tr>
<tr class="even">
<td align="left">Droid</td>
<td align="right">5</td>
<td align="right">69.75000</td>
</tr>
<tr class="odd">
<td align="left">Twi’lek</td>
<td align="right">2</td>
<td align="right">55.00000</td>
</tr>
<tr class="even">
<td align="left">Mirialan</td>
<td align="right">2</td>
<td align="right">53.10000</td>
</tr>
</tbody>
</table>
</div>
<div id="inlines" class="section level2">
<h2>Inlines</h2>
<p>You can also use <code>gluedown</code> to format R [inline code results][inline]. First, use R to calculate a result.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">rand &lt;-<span class="st"> </span><span class="kw">sample</span>(state.name, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="co"># `r md_bold(rand)`</span></a>
<a class="sourceLine" id="cb26-3" title="3">var &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">names</span>(starwars), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb26-4" title="4"><span class="co"># `r md_code(var)`</span></a></code></pre></div>
<p>Then, you can easily print that result in the middle of regular text with markdown formatting. In this case, our randomly selected state is… <strong>Georgia</strong> and the <code>mass</code> variable was randomly selected from the <code>dplyr::starwars</code> dataframe. Calculating results and using those calculations in the body of a text document increases reproducability.</p>
<p>In a <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3174372/">meta-study of psychology journals</a>, researchers found that “around 15% of the articles contained at least one statistical conclusion that proved, upon recalculation, to be incorrect.” These errors can be mitigated by using inline printing of results like we did above. With the <code>gluedown</code> package, programmers can <strong>emphasize</strong> those results without worry.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
